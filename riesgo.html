<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Story Map sobre el Riesgo Clim&aacute;tico en Tlaxcala"
    />
    <title>Riesgo Clim&aacute;tico - Tlaxcala</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/navbar.css" />
    <link rel="stylesheet" href="css/story-map.css" />
    <link rel="stylesheet" href="css/riesgo.css" />

    <!-- OpenLayers CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/ol@v8.2.0/ol.css"
    />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>

    <!-- Chart.js Datalabels Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>

    <!-- OpenLayers JS -->
    <script src="https://cdn.jsdelivr.net/npm/ol@v8.2.0/dist/ol.js"></script>

    <!-- Papa Parse para CSVs -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar">
      <div class="navbar-container">
        <a href="index.html" class="navbar-brand">
          <!--         <span class="navbar-brand-icon"><
</span> -->
          <span>Tlaxcala</span>
        </a>

        <button class="navbar-toggle" id="navbarToggle" aria-label="Abrir menú;">
          <span class="navbar-toggle-line"></span>
          <span class="navbar-toggle-line"></span>
          <span class="navbar-toggle-line"></span>
        </button>

        <div class="navbar-menu" id="navbarMenu">
          <a href="index.html" class="navbar-link">Inicio</a>
          <a href="vulnerabilidad.html" class="navbar-link">Vulnerabilidad</a>
          <a href="riesgo.html" class="navbar-link active">Riesgo</a>
          <a href="amenazas.html" class="navbar-link">Amenazas</a>
          <a href="impactos.html" class="navbar-link">Impactos</a>
          <a href="acciones-climaticas.html" class="navbar-link">Acciones Climáticas</a>
        </div>
      </div>
    </nav>

    <!-- Indicador para mostrar el navbar -->
    <div class="navbar-indicator" id="navbarIndicator"></div>

    <!-- Contenedor principal del Story Map -->
    <div class="story-map-container">
      <!-- Contenedor de capítulos con scroll-snap -->
      <div class="chapters-container" id="chaptersContainer">
        <!-- CAPÍTULO 1 -->
        <section class="chapter" id="risk-chapter-1" data-chapter="1">
          <!-- Título del mapa -->
          <h2 class="map-title">Riesgo climático por municipio</h2>

          <!-- Card 1: Texto + Botón + Grid de botones (40%, 70%) -->
          <div class="risk-card-1">
            <h2 class="chapter-title">&iquest;Qu&eacute; es el riesgo?</h2>
            <div class="chapter-content">
              <p>
                El riesgo es la posibilidad de que una amenaza, como una inundación o sequía, cause daños reales en una comunidad, área o sector.
              </p>
              <p>No depende solo de la presencia de la amenaza, sino también de qué tan vulnerables son las personas o ecosistemas expuestos y de su capacidad de respuesta.</p>
              <p>En pocas palabras: la amenaza es el evento; el riesgo es la probabilidad de que ese evento afecte de forma significativa.</p>
              <button class="btn-atlas" id="btnAtlasRiesgo">Ver Atlas de Riesgo Estatal</button>
            </div>

            <!-- Grid de 10 botones (2 filas x 5 columnas) -->
            <div class="risk-buttons-grid">
              <button class="risk-btn" data-risk="Apizaco2011">Apizaco 2011</button>
              <button class="risk-btn" data-risk="Atlangatepec2016">Atlangatepec 2016</button>
              <button class="risk-btn" data-risk="Huamantla2016">Huamantla 2016</button>
              <button class="risk-btn" data-risk="Natívitas2015">Natívitas 2015</button>
              <button class="risk-btn" data-risk="Papalotla-de-Xicohténcatl2015">Papalotla de Xicohténcatl 2015</button>
              <button class="risk-btn" data-risk="SanPablo-del-Monte_2015">San Pablo del Monte 2015</button>
              <button class="risk-btn" data-risk="Sanctórum-de-LázaroCárdenas2011">Sanctórum de Lázaro Cárdenas 2011</button>
              <button class="risk-btn" data-risk="Tlaxcala2018">Tlaxcala 2018</button>
              <button class="risk-btn" data-risk="Xicohtzinco2014">Xicohtzinco 2014</button>
              <button class="risk-btn" data-risk="Zacatelco2018">Zacatelco 2018</button>
            </div>
          </div>

          <!-- Card 2: Mapa (60%, 70%) -->
          <div class="risk-card-2">
            <div class="map-container" id="map-1"></div>
            <!-- Los controles de capas se generan dinámicamente -->
          </div>

          <!-- Card 3: Gráfica de Dona (40%, 40%) -->
          <div class="risk-card-3">
            <h3 class="card-subtitle">Total por Declaratoria</h3>
            <div class="chart-legend-container">
              <div class="chart-container-dona">
                <canvas id="donutChart"></canvas>
              </div>
              <div class="chart-legend" id="donutLegend"></div>
            </div>
          </div>

          <!-- Card 4: Gráfica de Líneas (60%, 40%) -->
          <div class="risk-card-4">
            <h3 class="card-subtitle">Declaratorias por Año</h3>
            <div class="chart-container-lines">
              <canvas id="linesChart"></canvas>
            </div>
          </div>
        </section>

        <!-- CAPÍTULO 2 -->
        <section class="chapter" id="risk-chapter-2" data-chapter="2">
          <!-- Título del capítulo -->
          <h2 class="map-title">Eventos por a&ntilde;o y declaratorias</h2>

          <!-- Card 1: Texto con lista de eventos (40%, 60%) -->
          <div class="risk-card-1">
            <h2 class="chapter-title">Eventos Clim&aacute;ticos en Tlaxcala</h2>
            <div class="chapter-content">
              <p>
                En Tlaxcala, los riesgos clim&aacute;ticos se manifiestan en heladas, lluvias intensas, sequ&iacute;as, granizadas e incluso nevadas at&iacute;picas. Estos fen&oacute;menos, cada vez m&aacute;s frecuentes por el cambio clim&aacute;tico, afectan cosechas, viviendas, infraestructura y la salud de la poblaci&oacute;n.
              </p>
              <ul class="events-list">
                <li>&#10052;&#65039; Nevadas, heladas y granizadas: 197 eventos.</li>
                <li>&#127783;&#65039; Lluvias intensas: 121 eventos.</li>
                <li>&#127797; Sequ&iacute;as: 88 eventos.</li>
                <li>&#10052;&#65039; Heladas reportadas aparte: 61 eventos.</li>
                <li>&#127755; Actividad volc&aacute;nica (Popocat&eacute;petl): 60 eventos.</li>
                <li>&#127758; Sismos: 40 eventos.</li>
                <li>&#129398; Bajas temperaturas: 17 eventos.</li>
                <li>&#127744; Ciclones tropicales: 5 eventos.</li>
              </ul>
            </div>
          </div>

          <!-- Card 2: Mapa (60%, 60%) -->
          <div class="risk-card-2">
            <div class="map-container" id="map-2"></div>
            <!-- Los controles de capas se generan dinámicamente -->
          </div>

          <!-- Card 3: Gráfica de Dona (40%, 40%) -->
          <div class="risk-card-3">
            <h3 class="card-subtitle">Clasificación de Eventos</h3>
            <div class="chart-legend-container">
              <div class="chart-container-dona">
                <canvas id="donutChart2"></canvas>
              </div>
              <div class="chart-legend" id="donutLegend2"></div>
            </div>
          </div>

          <!-- Card 4: Gráfica de Líneas (60%, 40%) -->
          <div class="risk-card-4">
            <h3 class="card-subtitle">Eventos por Año y Clasificación</h3>
            <div class="chart-container-lines">
              <canvas id="linesChart2"></canvas>
            </div>
          </div>
        </section>

        <!-- CAPÍTULO 3 -->
        <section class="chapter" id="risk-chapter-3" data-chapter="3">
          <!-- Título del capítulo -->
          <h2 class="map-title">Atlas de Riesgo Municipal</h2>

          <!-- Card de texto (izquierda, 30%) -->
          <div class="chapter-text">
            <!-- <h2 class="chapter-title">Atlas Municipales</h2> -->
            <div class="chapter-content">
<!--               <p>
                Los Atlas de Riesgo Municipales identifican las amenazas, vulnerabilidades y riesgos específicos de cada municipio ante fenómenos naturales.
              </p>
              <p>
                Estos documentos son herramientas fundamentales para la toma de decisiones en materia de protección civil y ordenamiento territorial.
              </p> -->
              <p>
                <strong>Consulta los Atlas de Riesgo disponibles para los siguientes municipios:</strong>
              </p>
              <div id="atlas-info" style="display: none;">
                <h3></h3>
                <p></p>
                <a href="#" target="_blank" class="btn-atlas">Ver Atlas de Riesgo</a>
              </div>
            </div>
          </div>

          <!-- Mapa (derecha, 70%) -->
          <div class="chapter-map">
            <div class="map-container" id="map-3"></div>
          </div>
        </section>
      </div>

      <!-- Timeline inferior -->
      <div class="timeline" id="timeline">
        <div class="timeline-item" data-chapter="1">
          <div class="timeline-circle">1</div>
          <div class="timeline-label">Riesgo climático</div>
        </div>
        <div class="timeline-item" data-chapter="2">
          <div class="timeline-circle">2</div>
          <div class="timeline-label">Eventos y Declaratorias</div>
        </div>
        <div class="timeline-item" data-chapter="3">
          <div class="timeline-circle">3</div>
          <div class="timeline-label">Atlas Municipales</div>
        </div>
      </div>

      <!-- Botones de navegación -->
      <div class="nav-buttons left" id="navButtonsLeft">
        <button class="nav-btn" id="btnPrev" aria-label="Capítulo anterior">
          ←
        </button>
      </div>
      <div class="nav-buttons right" id="navButtonsRight">
        <button class="nav-btn" id="btnNext" aria-label="Siguiente capítulo">
          →
        </button>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="js/config/riesgo-config.js"></script>
    <script src="js/config/riesgo-main.js"></script>
    <script src="js/config/riesgo-charts.js"></script>
  </body>
</html>
